function Sheet(title,desc,members,comments,dueDate,timeTraking,attachments,checklists){this.title=title,this.desc=desc,this.members=members,this.comments=comments,this.dueDate=dueDate,this.timeTraking=timeTraking,this.attachments=attachments,this.checklists=checklists}function Column(id,title,tasksCount,estimate,remain){this.id=id,this.title=title,this.sheets=[],this.estimate=estimate,this.remain=remain,this.addSheet=function(title,desc,members,comments){this.sheets.push(new Sheet(title,desc,members,comments))}}function Board(id,name){this.id=id,this.name=name,this.columns=[],this.addColumn=function(id,title,tasksCount,estimate,remain){this.columns.push(new Column(id,title,tasksCount,estimate,remain))}}function CheckList(name,description,checked){this.name=name,this.description=description,this.checked=checked}function RemoveButtonController(){}function AddItemController(){}angular.module("filters.stringUtils",[]).filter("removeSpaces",[function(){return function(string){return angular.isString(string)?string.replace(/[\s]/g,""):string}}]),angular.module("roundNumbers",[]).filter("roundNumber",[function(){return function(num){return Math.round(100*num)/100}}]),angular.module("kanbanApp",["ngRoute","dndLists","contenteditable","filters.stringUtils","roundNumbers","720kb.datepicker","remove","addItem","boardDetail","boardList"]),angular.module("kanbanApp").config(["$locationProvider","$routeProvider",function($locationProvider,$routeProvider){$locationProvider.hashPrefix("!"),$routeProvider.when("/boards",{template:"<board-list></board-list>"}).when("/boards/:boardId",{template:"<board-detail></board-detail>"}).otherwise("/boards")}]),angular.module("remove",[]),angular.module("remove").component("removeButton",{templateUrl:"/buttons/remove-button/remove-button.template.html",controller:RemoveButtonController,bindings:{removeData:"=",removeIndex:"="}}),angular.module("addItem",[]),angular.module("addItem").component("addItem",{templateUrl:"/add-item/add-item.template.html",controller:AddItemController,bindings:{addfunc:"=",array:"=",itemname:"@"}}),angular.module("boardList",[]),angular.module("boardList").component("boardList",{templateUrl:"/board-list/board-list.template.html",controller:["$http",function($http){var self=this;this.addBoard=function(board,id,name){board.push(new Board(id,name))},$http.get("boards/boards.json").then(function(response){self.boards=response.data})}]}),angular.module("boardDetail",["ngRoute"]),angular.module("boardDetail").component("boardDetail",{templateUrl:"/board-detail/board-detail.template.html",controller:["$http","$routeParams",function($http,$routeParams){var self=this;self.addColumn=function(board,id,name){board.push(new Column(id,name))},self.addSheet=function(column){column.push(new Sheet("","",[],[],"",{estimatedTime:"",spentTime:0,remaningTime:"",timeFormat:""},[],[]))},self.addCheckList=function(checklist,name,description){var name=name||"",description=description||"";checklist.push(new CheckList(name,description,!1))},self.addItem=function(array,item){var item=item||"";array.push(item)},self.timeConvertToMinutes=function(time){var timeArray=[];timeArray=time.length>1?time.split(" "):timeArray.push(time);var minutes,hours,days,months;for(var t in timeArray)-1!=timeArray[t].indexOf("m")&&(minutes=timeArray[t]),-1!=timeArray[t].indexOf("h")&&(hours=timeArray[t]),-1!=timeArray[t].indexOf("d")&&(days=timeArray[t]),-1!=timeArray[t].indexOf("M")&&(months=timeArray[t]);return void 0==minutes&&(minutes=0),void 0==hours&&(hours=0),void 0==days&&(days=0),void 0==months&&(months=0),parseInt(minutes)+60*parseInt(hours)+24*parseInt(days)*60+30*parseInt(months)*24*60},self.timeConvertFromMinutes=function(time){var totalMonth,totalDays,totalHours,totalMinutes,time=time||0;time>43200&&(totalMonth=time/43200)%1!=0&&(totalDays=totalMonth%1*43200/1440)%1!=0&&(totalHours=totalDays%1*1440/60)%1!=0&&(totalMinutes=totalHours%1*60),time>1440&&time<43200&&(totalDays=time/1440)%1!=0&&(totalHours=totalDays%1*1440/60)%1!=0&&(totalMinutes=totalHours%1*60),time>60&&time<1440&&(totalHours=time/60)%1!=0&&(totalMinutes=totalHours%1*60),time<60&&(totalMinutes=time);var convertedTime=[];return totalMinutes&&convertedTime.push(Math.round(totalMinutes)+"m "),totalHours&&convertedTime.push(Math.floor(totalHours)+"h "),totalDays&&convertedTime.push(Math.floor(totalDays)+"d "),totalMonth&&convertedTime.push(Math.floor(totalMonth)+"M"),convertedTime.join(" ")},self.getColumnTime=function(columnSheets,timeType){var filteredTime=columnSheets.map(function(sheet){return sheet.timeTraking[timeType]?sheet.timeTraking[timeType]:0}).filter(function(phaseTimeSpend){return void 0!=phaseTimeSpend&&null!=phaseTimeSpend&&""!=phaseTimeSpend});return 1==filteredTime.length?self.timeConvertToMinutes(filteredTime[0]):0==filteredTime.length?[0]:filteredTime.map(function(item){return self.timeConvertToMinutes(item)}).reduce(function(sum,current){return sum+current})},self.getCheckedChecklists=function(sheet){if(sheet.checklists)return sheet.checklists.map(function(item){return item.checked}).filter(function(item){return 1==item})},$http.get("boards/"+$routeParams.boardId+".json").then(function(response){self.board=response.data})}]});